import{S as m}from"./Sidebar-3a40d533.js";import{N as g,F as v}from"./Footer-3c1305de.js";import{C as r,S as f}from"./Card-3a09e58f.js";import{a as p}from"./sweetalert2.all-1e3fb24f.js";import{r as c,b as _,f as b,i as s,n as y,g as t,y as S}from"./index-6a3474be.js";const D={id:"wrapper"},w={id:"content-wrapper",class:"d-flex flex-column"},k={id:"content"},x={class:"container-fluid mt-4"},C=t("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Dashboard",-1),P={class:"row mt-3"},B={class:"col-sm-6"},I={class:"col-sm-3"},N={class:"col-sm-3"},$={class:"row mt-4"},T={class:"col-xl-3 col-md-6 mb-4"},V={class:"col-xl-3 col-md-6 mb-4"},R={class:"col-xl-3 col-md-6 mb-4"},z=S('<div class="col-xl-3 col-md-6 mb-4"><div class="card border-left-warning shadow h-100 py-2"><div class="card-body"><div class="row no-gutters align-items-center"><div class="col mr-2"><div class="text-xs font-weight-bold text-warning text-uppercase mb-1"> Akun </div><div class="h5 mb-0 font-weight-bold text-gray-800"> 4 </div></div><div class="col-auto"><i class="fas fa-solid fa-users fa-2x text-gray-300"></i></div></div></div></div></div>',1),A={data(){return{hutangBelumDibayar:0,hutangSudahDibayar:0,saldoSaatIni:1e5,totalPenerimaan:0,totalPengiriman:0,ready:!1,user_id:""}},methods:{async fetchDataReport(){try{const a=await p.get(`https://backend.keuanganfpti.com/api/report-keuangan/${this.user_id}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.hutangBelumDibayar=a.data.hutangBelumDibayar,this.hutangSudahDibayar=a.data.hutangSudahDibayar,this.saldoSaatIni=a.data.saldoSaatIni,this.totalPenerimaan=a.data.totalPenerimaan,this.totalPengiriman=a.data.totalPengiriman,this.ready=!0}catch(a){console.error(a)}}},computed:{formatCurrency:function(){return function(a){return a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a):"Rp 0,00"}}},created(){const a=sessionStorage.getItem("token");if(a)try{const[o,n]=a.split("."),l=JSON.parse(atob(o)),e=atob(n),i=JSON.parse(atob(a.split(".")[1])),u=i.exp,d=new Date(u*1e3);console.log("Waktu Kedaluwarsa (UTC):",d.toUTCString()),new Date>d?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const h=i.level;this.user_id=i.id,console.log("ini idddd:",this.user_id),h!=="1"?this.$router.push("/unauthorized"):(!l||!e)&&this.$router.push("/"),this.fetchDataReport()}catch(o){console.error("Error decoding token:",o),this.$router.push("/")}else this.$router.push("/")}},U=Object.assign(A,{__name:"Dashboard",setup(a){const o=c(!1),n=c(""),l=()=>{o.value=!o.value,n.value=o.value?"toggle-sidebar":""};return(e,i)=>(_(),b("div",D,[s(m,{class:y(n.value)},null,8,["class"]),t("div",w,[t("div",k,[s(g,{onToggleSidebar:l}),t("div",x,[C,t("div",P,[t("div",B,[s(f)]),t("div",I,[s(r,{color:"success",header:"Pemasukan",value:e.formatCurrency(e.totalPenerimaan),icon:"fa-calendar"},null,8,["value"])]),t("div",N,[s(r,{color:"danger",header:"Pengeluaran",value:e.formatCurrency(e.totalPengiriman),icon:"fa-calendar"},null,8,["value"])])]),t("div",$,[t("div",T,[s(r,{color:"warning",header:"Saldo",value:e.formatCurrency(e.saldoSaatIni),icon:"fa-calendar"},null,8,["value"])]),t("div",V,[s(r,{color:"primary",header:"Lunas",value:e.formatCurrency(e.hutangSudahDibayar),icon:"fa-clipboard-list"},null,8,["value"])]),t("div",R,[s(r,{color:"info",header:"Hutang",value:e.formatCurrency(e.hutangBelumDibayar),icon:"fa-clipboard-list"},null,8,["value"])]),z])])]),s(v)])]))}});export{U as default};
