import{S as f}from"./Sidebar-0d63748e.js";import"./TimeVote-ea42eaf2.js";import{N as v,F as b}from"./Footer-8f41188f.js";import{a as y}from"./sweetalert2.all-1e3fb24f.js";import{P as g,D as k}from"./jquery.dataTables-31a7655e.js";import{r as p,b as n,f as d,i as h,n as x,g as e,l as _,c as S,z as w,A as B,F as C,B as D,C as o}from"./index-c01b12d4.js";const J={id:"wrapper"},N={id:"content-wrapper",class:"d-flex flex-column"},T={id:"content"},j={class:"container-fluid mt-4"},$=e("h1",{class:"h3 mb-0 text-gray-800 text-center mb-5"},"List Jurnal",-1),z={class:"row"},F=e("div",{class:"col-1"},null,-1),P={class:"col-10"},A={class:"table-responsive mt-5"},I={key:0,class:"text-center"},L=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"50px"}},"No"),e("th",{scope:"col"},"Pengirim"),e("th",{scope:"col"},"Jumlah"),e("th",{scope:"col"},"Tanggal"),e("th",{scope:"col"},"Catatan"),e("th",{scope:"col"},"Penerima")])],-1),O=e("div",{class:"col-1"},null,-1);g.use(k);const V={data(){return{jurnals:[],ready:!1}},methods:{async fetchDataJurnal(){try{const t=await y.get("https://backend.keuanganfpti.com/api/data-jurnal",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.jurnals=t.data.data,this.ready=!0}catch(t){this.ready=!0,console.error(t)}}},created(){const t=sessionStorage.getItem("token");if(t)try{const[a,l]=t.split("."),u=JSON.parse(atob(a)),r=atob(l),i=JSON.parse(atob(t.split(".")[1])),s=i.exp,c=new Date(s*1e3);console.log("Waktu Kedaluwarsa (UTC):",c.toUTCString()),new Date>c?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const m=i.level;this.user_id=i.id,console.log("ini idddd:",this.user_id),m!=="1"?this.$router.push("/unauthorized"):(!u||!r)&&this.$router.push("/"),this.fetchDataJurnal()}catch(a){console.error("Error decoding token:",a),this.$router.push("/")}else this.$router.push("/")}},H=Object.assign(V,{__name:"Jurnal",setup(t){const a=p(!1),l=p(""),u=()=>{a.value=!a.value,l.value=a.value?"toggle-sidebar":""};return(r,i)=>(n(),d("div",J,[h(f,{class:x(l.value)},null,8,["class"]),e("div",N,[e("div",T,[h(v,{onToggleSidebar:u}),e("div",j,[$,e("div",z,[F,e("div",P,[e("div",A,[r.ready?_("",!0):(n(),d("p",I,"Loading...")),r.ready?(n(),S(B(g),{key:1,class:"display table table-striped"},{default:w(()=>[L,e("tbody",null,[(n(!0),d(C,null,D(r.jurnals,(s,c)=>(n(),d("tr",{key:s.id},[e("td",null,o(c+1),1),e("td",null,o(s.nama_pengirim),1),e("td",null,o(s.jumlah_transaksi),1),e("td",null,o(s.tgl_transaksi),1),e("td",null,o(s.deskripsi),1),e("td",null,o(s.nama_penerima),1)]))),128))])]),_:1})):_("",!0)])]),O])])]),h(b)])]))}});export{H as default};
