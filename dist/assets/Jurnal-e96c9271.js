import{S as v,N as f,F as b}from"./Footer-42b02b2b.js";import{P as g,D as y}from"./TimeVote-2225666b.js";import{a as k}from"./_commonjsHelpers-34c3cec1.js";import"./sweetalert2.all-777e80f8.js";import{r as p,b as r,f as d,i as h,n as x,g as e,l as _,c as S,G as w,J as D,F as J,H as N,I as l}from"./index-3150e1ef.js";const j={id:"wrapper"},B={id:"content-wrapper",class:"d-flex flex-column"},C={id:"content"},T={class:"container-fluid mt-4"},$=e("h1",{class:"h3 mb-0 text-gray-800 text-center mb-5"},"List Jurnal",-1),F={class:"row"},I=e("div",{class:"col-1"},null,-1),z={class:"col-10"},E={class:"table-responsive mt-5"},L={key:0,class:"text-center"},O=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"50px"}},"No"),e("th",{scope:"col"},"Jenis"),e("th",{scope:"col"},"Nominal"),e("th",{scope:"col"},"Event"),e("th",{scope:"col"},"Deskripsi")])],-1),V=e("div",{class:"col-1"},null,-1);g.use(y);const A={data(){return{jurnals:[],ready:!1}},methods:{async fetchDataJurnal(){try{const t=await k.get("http://127.0.0.1:8000/api/jurnal",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.jurnals=t.data.data,this.ready=!0}catch(t){this.ready=!0,console.error(t)}}},created(){const t=sessionStorage.getItem("token");if(t)try{const[s,n]=t.split("."),u=JSON.parse(atob(s)),o=atob(n),i=JSON.parse(atob(t.split(".")[1])),a=i.exp,c=new Date(a*1e3);console.log("Waktu Kedaluwarsa (UTC):",c.toUTCString()),new Date>c?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const m=i.level;this.user_id=i.id,console.log("ini idddd:",this.user_id),m!=="1"?this.$router.push("/unauthorized"):(!u||!o)&&this.$router.push("/"),this.fetchDataJurnal()}catch(s){console.error("Error decoding token:",s),this.$router.push("/")}else this.$router.push("/")}},W=Object.assign(A,{__name:"Jurnal",setup(t){const s=p(!1),n=p(""),u=()=>{s.value=!s.value,n.value=s.value?"toggle-sidebar":""};return(o,i)=>(r(),d("div",j,[h(v,{class:x(n.value)},null,8,["class"]),e("div",B,[e("div",C,[h(f,{onToggleSidebar:u}),e("div",T,[$,e("div",F,[I,e("div",z,[e("div",E,[o.ready?_("",!0):(r(),d("p",L,"Loading...")),o.ready?(r(),S(D(g),{key:1,class:"display table table-striped"},{default:w(()=>[O,e("tbody",null,[(r(!0),d(J,null,N(o.jurnals,(a,c)=>(r(),d("tr",{key:a.id},[e("td",null,l(c+1),1),e("td",null,l(a.jenis),1),e("td",null,l(a.jumlah),1),e("td",null,l(a.event),1),e("td",null,l(a.deskripsi),1)]))),128))])]),_:1})):_("",!0)])]),V])])]),h(b)])]))}});export{W as default};
