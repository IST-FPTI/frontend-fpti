import{S as g,N as f,F as y}from"./Footer-081b01b0.js";import{P as h,D as k}from"./TimeVote-4fbbc547.js";import{a as B}from"./_commonjsHelpers-34c3cec1.js";import"./sweetalert2.all-777e80f8.js";import{r as c,b as u,f as _,i,n as v,g as e,l as p,c as C,G as S,J as w,I as o}from"./index-af01313f.js";const D={id:"wrapper"},N={id:"content-wrapper",class:"d-flex flex-column"},I={id:"content"},T={class:"container-fluid mt-4"},P=e("h1",{class:"h3 mb-0 text-gray-800 text-center mb-5"},"Buku Besar",-1),V={class:"row"},$=e("div",{class:"col-1"},null,-1),z={class:"col-10"},F={class:"table-responsive"},J={key:0,class:"text-center"},O=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"50px"}},"No"),e("th",{scope:"col"},"Saldo"),e("th",{scope:"col"},"Pengeluaran"),e("th",{scope:"col"},"Pemasukan"),e("th",{scope:"col"},"Hutang"),e("th",{scope:"col"},"Piutang")])],-1),x=e("td",null,"1",-1),A=e("div",{class:"col-1"},null,-1);h.use(k);const E={data(){return{bukuBesar:{saldo:"",total_pengeluaran:"",total_pemasukan:"",hutang_belum_dibayar:"",piutang_belum_dibayar:""},ready:!1,user_id:""}},methods:{async fetchDataBukuBesar(){try{const a=await B.get("https://backend.keuanganfpti.com/api/darsboard-data",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.bukuBesar={saldo:a.data.saldo,total_pengeluaran:a.data.total_pengeluaran,total_pemasukan:a.data.total_pemasukan,hutang_belum_dibayar:a.data.hutang_belum_dibayar,piutang_belum_dibayar:a.data.piutang_belum_dibayar},console.log(a.data.saldo),this.ready=!0}catch(a){this.ready=!0,console.error(a)}}},computed:{formatCurrency:function(){return function(a){return a?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a):"Rp 0,00"}}},created(){const a=sessionStorage.getItem("token");if(a)try{const[s,r]=a.split("."),l=JSON.parse(atob(s)),t=atob(r),n=JSON.parse(atob(a.split(".")[1])),m=n.exp,d=new Date(m*1e3);console.log("Waktu Kedaluwarsa (UTC):",d.toUTCString()),new Date>d?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const b=n.level;this.user_id=n.id,console.log("ini idddd:",this.user_id),b!=="1"?this.$router.push("/unauthorized"):(!l||!t)&&this.$router.push("/"),this.fetchDataBukuBesar()}catch(s){console.error("Error decoding token:",s),this.$router.push("/")}else this.$router.push("/")}},H=Object.assign(E,{__name:"BukuBesar",setup(a){const s=c(!1),r=c(""),l=()=>{s.value=!s.value,r.value=s.value?"toggle-sidebar":""};return(t,n)=>(u(),_("div",D,[i(g,{class:v(r.value)},null,8,["class"]),e("div",N,[e("div",I,[i(f,{onToggleSidebar:l}),e("div",T,[P,e("div",V,[$,e("div",z,[e("div",F,[t.ready?p("",!0):(u(),_("p",J,"Loading...")),t.ready?(u(),C(w(h),{key:1,class:"display table table-striped"},{default:S(()=>[O,e("tbody",null,[e("tr",null,[x,e("td",null,o(t.formatCurrency(t.bukuBesar.saldo)),1),e("td",null,o(t.formatCurrency(t.bukuBesar.total_pengeluaran)),1),e("td",null,o(t.formatCurrency(t.bukuBesar.total_pemasukan)),1),e("td",null,o(t.formatCurrency(t.bukuBesar.hutang_belum_dibayar)),1),e("td",null,o(t.formatCurrency(t.bukuBesar.piutang_belum_dibayar)),1)])])]),_:1})):p("",!0)])]),A])])]),i(y)])]))}});export{H as default};
