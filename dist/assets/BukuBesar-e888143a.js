import{S as g}from"./Sidebar-4be0254e.js";import"./TimeVote-777b105b.js";import{N as b,F as k}from"./Footer-f46338e3.js";import{a as y}from"./sweetalert2.all-1e3fb24f.js";import{P as m,D as B}from"./jquery.dataTables-e7634350.js";import{r as p,b as n,f as i,i as h,n as v,g as e,l as _,c as S,z as C,A as D,F as w,B as N,C as r}from"./index-63600712.js";const T={id:"wrapper"},x={id:"content-wrapper",class:"d-flex flex-column"},I={id:"content"},F={class:"container-fluid mt-4"},V=e("h1",{class:"h3 mb-0 text-gray-800 text-center mb-5"},"Buku Besar",-1),$={class:"row"},z=e("div",{class:"col-1"},null,-1),A={class:"col-10"},K={class:"table-responsive"},O={key:0,class:"text-center"},E=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"50px"}},"No"),e("th",{scope:"col"},"Akun"),e("th",{scope:"col"},"Total Debit"),e("th",{scope:"col"},"Total Kredit"),e("th",{scope:"col"},"Total Hutang"),e("th",{scope:"col"},"Saldo Sekarang")])],-1),J=e("div",{class:"col-1"},null,-1);m.use(B);const L={data(){return{bukuBesar:[],ready:!1,user_id:""}},methods:{async fetchDataBukuBesar(){try{const t=await y.get("https://backend.keuanganfpti.com/api/buku-besar",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.bukuBesar=t.data.data,this.ready=!0}catch(t){this.ready=!0,console.error(t)}}},computed:{formatCurrency:function(){return function(t){return t?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(t):"Rp 0,00"}}},created(){const t=sessionStorage.getItem("token");if(t)try{const[a,l]=t.split("."),d=JSON.parse(atob(a)),s=atob(l),u=JSON.parse(atob(t.split(".")[1])),o=u.exp,c=new Date(o*1e3);console.log("Waktu Kedaluwarsa (UTC):",c.toUTCString()),new Date>c?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const f=u.level;this.user_id=u.id,console.log("ini idddd:",this.user_id),f!=="1"?this.$router.push("/unauthorized"):(!d||!s)&&this.$router.push("/"),this.fetchDataBukuBesar()}catch(a){console.error("Error decoding token:",a),this.$router.push("/")}else this.$router.push("/")}},q=Object.assign(L,{__name:"BukuBesar",setup(t){const a=p(!1),l=p(""),d=()=>{a.value=!a.value,l.value=a.value?"toggle-sidebar":""};return(s,u)=>(n(),i("div",T,[h(g,{class:v(l.value)},null,8,["class"]),e("div",x,[e("div",I,[h(b,{onToggleSidebar:d}),e("div",F,[V,e("div",$,[z,e("div",A,[e("div",K,[s.ready?_("",!0):(n(),i("p",O,"Loading...")),s.ready?(n(),S(D(m),{key:1,class:"display table table-striped"},{default:C(()=>[E,e("tbody",null,[(n(!0),i(w,null,N(s.bukuBesar,(o,c)=>(n(),i("tr",{key:o.id},[e("td",null,r(c+1),1),e("td",null,r(o.name),1),e("td",null,r(s.formatCurrency(o.total_pengeluaran)),1),e("td",null,r(s.formatCurrency(o.total_pemasukan)),1),e("td",null,r(s.formatCurrency(o.total_hutang)),1),e("td",null,r(s.formatCurrency(o.saldo)),1)]))),128))])]),_:1})):_("",!0)])]),J])])]),h(k)])]))}});export{q as default};
